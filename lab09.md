# "自顶向下，逐步求精"

>其实，程序员的一个基本功是，能够将复杂的问题分解开来。

* “自顶向下” 

是将复杂、大的问题划分为小问题，找出问题的关键、重点所在，然后用精确的思维定性、定量地去描述问题。

* “逐步求精”

是将现实世界的问题经抽象转化为逻辑空间或求解空间的问题。复杂问题经抽象化处理变为相对比较简单的问题。经若干步抽象（精化）处理，最后到求解域中只是比较简单的编程问题。

![](https://img-blog.csdn.net/20171128165340567?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGFhZ3l6eg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

----------
**接下来我们根据洗衣机的实例来具体说一下这个重要的编程方法**

我们的任务是实现洗衣机的洗衣程序。

假设以下的模块已经可以实现了： 

waterinswitch(openclose) // open 打开上水开关， close关闭

wateroutswitch(openclose) // open 打开排水开关， close关闭

getwatervolume() //返回洗衣机内部水的高度

motorrun(direction) // 电机转动。 left左转， right右转， stop停

timecounter() // 返回当前时间计数，以秒为单位

halt(returncode) //停机， success 成功 failure 失败

## First

首先先将整个洗衣程序分解为以下几个大步骤：

1. 打开电源
2. 选择模式：水位等
3. 注水
4. 浸泡
5. 运转
6. 排水
7. 脱水
8. 关闭电源

## Then 

将功能结构到这里，我们会很容易发现一些细节问题，并再次完善整个洗衣过程。

如何在达到既定水量的时候停止注水？ 

通过传感器反馈的数据作为指标，当水到达一定高度触发传感器时就停止注水。

转盘和直筒要如何旋转和摇动才能达到最好的洗涤效果？ 

待测试。

如何检测漂洗得干不干净？不干净的话要怎么办？ 

每次漂洗过后通过传感器检测排出的水的ph值，若达到指标（即漂洗干净）就停止注水排水的过程，若未达到指标（即漂洗不干净），则重复漂洗过程。

要是水管无法排水怎么办？ 

若在漂洗过程中通过传感器检测到的水位一直不下降，则中断洗衣过程并发出警报提醒用户。

要脱水到什么时候？

直到水管中水流极少是即可。

## Last

思考问题，再将上面各个步骤的实现用伪代码表示出来：
```
1. Turn on the power
2. User selection mode
3. REPEAT 
4.      注水
5. UNTIL 水位=要求的水位
6. REPEAT 
7.      浸泡
8. UNTIL 时间=要求时长
9. WHILE 运转时间>0
10.     左转5次
11.     右转5次
12.     时间减少；
13.ENDWHILE
14. 打开排水开关
15. WHILE 水量!=0
16.     排水
17. ENDWHILE
18. WHILE 脱水时间>0
19.     转动
20.     时间减少
21. ENDWHILE
22. Turn off the power
```
整个过程下来我们可以轻易地找出各个小步骤的可以改进的地方并不断对程序加以改进，这里可以很清楚地体现出“自顶向下，逐步求精”方法的妙处。

--------
# 总结

其实「自顶向下，逐步求精」不仅可以应用在编程中，它更是一种思维方式。比如著名的乔希·维茨金 (Josh Waitzkin)在他的书《学习之道》中介绍了他之所以能在多个不同的领域达到世界顶级水平的秘诀就是这种「自顶向下，逐步求精」的思维方式。

总之，不管作为一个程序员，一个 IT 工作者，还是一个学习者，一个不断成长的个体，我想我们都有必要掌握「自顶向下，逐步求精」的方法。
